# 前端集成测试计划

**测试日期：** 2026-01-03
**测试工具：** Playwright (浏览器自动化)
**测试环境：** Frontend (http://localhost:5173) + Backend (http://localhost:8000)

## 测试范围

### 1. 认证流程测试
- [ ] 登录页面加载
- [ ] 无效凭据登录（应显示错误）
- [ ] 有效凭据登录（应跳转到仪表盘）
- [ ] Token持久化（刷新页面保持登录状态）
- [ ] 登出功能
- [ ] 未认证访问保护路由（应重定向到登录）
- [ ] 401错误自动登出

### 2. 仪表盘测试
- [ ] 概览统计数据显示
  - 总红酒数量
  - 总库存数量
  - 总库存价值
  - 低库存警告数量
- [ ] 趋势图表渲染
  - 库存趋势图
  - 交易量趋势图
- [ ] 分布图表渲染
  - 按产区分布
  - 按品种分布
- [ ] 低库存警告列表
- [ ] 快速操作链接

### 3. 红酒管理测试
- [ ] 红酒列表加载和分页
- [ ] 搜索功能（按名称）
- [ ] 筛选功能
  - 按产区筛选
  - 按葡萄品种筛选
  - 按供应商筛选
  - 按库存位置筛选
- [ ] 排序功能（按各字段）
- [ ] 添加新红酒
  - 表单验证
  - 成功创建并显示
- [ ] 编辑红酒
  - 打开编辑表单
  - 修改数据
  - 保存成功
- [ ] 删除红酒
  - 确认对话框
  - 删除成功并从列表移除
- [ ] 查看红酒详情

### 4. 库存管理测试
- [ ] 交易记录列表加载
- [ ] 筛选功能
  - 按交易类型（入库/出库）
  - 按红酒筛选
  - 按时间范围筛选
- [ ] 入库操作
  - 打开入库表单
  - 填写数据
  - 成功入库并更新库存
- [ ] 出库操作
  - 打开出库表单
  - 填写数据
  - 成功出库并减少库存
- [ ] 出库数量验证
  - 尝试出库超过库存数量（应显示错误）
- [ ] 查看红酒交易历史

### 5. 用户管理测试（管理员）
- [ ] 用户列表加载
- [ ] 添加新用户
  - 表单验证
  - 成功创建
- [ ] 编辑用户信息
- [ ] 切换用户状态（启用/禁用）
- [ ] 删除用户
- [ ] 权限控制（普通用户不可访问）

### 6. 主题切换测试
- [ ] 切换深色/浅色主题
- [ ] 主题设置持久化

### 7. 响应式布局测试
- [ ] 桌面视图（1920x1080）
- [ ] 平板视图（768x1024）
- [ ] 移动视图（375x667）
- [ ] 侧边栏折叠/展开

### 8. 错误处理测试
- [ ] 网络错误显示
- [ ] 表单验证错误显示
- [ ] Toast通知显示
- [ ] 404页面
- [ ] 后端错误处理

### 9. 导出/导入测试
- [ ] 导出红酒列表（CSV/Excel）
- [ ] 导出交易记录
- [ ] 导入红酒数据

## 测试数据

### 测试账户
- **管理员：** admin@wine.com / admin123
- **普通用户：** user@wine.com / user123 (需先创建)

### 测试红酒数据
- 名称：测试红酒 2026
- 年份：2020
- 产区：波尔多
- 葡萄品种：赤霞珠
- 价格：888.00
- 供应商：测试供应商
- 存放位置：A区1号
- 库存：100
- 低库存阈值：20

## 成功标准

- ✅ 所有核心功能正常工作
- ✅ 用户界面响应流畅
- ✅ 数据正确显示和更新
- ✅ 错误处理适当
- ✅ 无控制台错误
- ✅ 移动端适配良好

## 测试工具

### 自动化测试脚本
- `test_frontend.py` - Playwright自动化测试

### 手动测试检查清单
- `manual_test_checklist.md` - 手动测试项目

## 预计测试时间

- 自动化测试：10-15分钟
- 手动检查：20-30分钟
- **总计：** 30-45分钟
